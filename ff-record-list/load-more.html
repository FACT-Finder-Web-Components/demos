<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Record List Demo</title>
  <link rel="stylesheet" href="../assets/demo-styles.css">
  <script src="../assets/scripts.js"></script>

  <script src="../node_modules/ff-web-components/dist/vendor/custom-elements-es5-adapter.js"></script>
  <script src="../node_modules/ff-web-components/dist/vendor/webcomponents-loader.js"></script>
  <script defer src="../node_modules/ff-web-components/dist/bundle.js"></script>
  <style>
    .load-more {
      margin-top: 1rem;
      margin-bottom: 1rem;
      text-align: center;
      width: 40%;
      padding: .375rem .75rem;
      background-color: #004587;
      border: 1px solid #004587;
      line-height: 1.25rem;
      color: #fff;
      text-align: center;
      vertical-align: middle;
      user-select: none;
      cursor: pointer;
    }

    .load-more:hover {
      background-color: #003669;
    }
  </style>
  <script>
    window.addEventListener(`ffCoreReady`, ({ factfinder }) => {
      const defs = factfinder.config.defaults.general;
      defs.url = `https://ng-search-web-components.fact-finder.de/fact-finder`;
      defs.api = `v5`;
      defs.channel = `demo-bergfreunde-en`;
      factfinder.request.search({ query: `trousers` }, { requestOptions: { origin: `searchImmediate` } });

      const loadMoreButton = document.getElementById('load-more');
      const ffList = document.querySelector('ff-record-list');

      loadMoreButton.addEventListener('click', () => {
        ffList.dispatchEvent( new CustomEvent('load-more-event', { bubbles: true, composed: true }));
      });
    }, { once: true });
  </script>
</head>
<body>

<div class="searchbar">
  <ff-searchbox use-suggest="false">
    <input placeholder="Search..." autofocus />
    <ff-searchbutton>
      <button>
        <span class="icon-search"></span>
      </button>
    </ff-searchbutton>
  </ff-searchbox>
</div>

<div id="previous-button" class="load-more" hidden>
  <button>Load previous</button>
</div>

<ff-record-list unresolved load-more>
  <ff-record>
    <a data-anchor="https://www.alpinetrek.co.uk{{record.Deeplink}}"
       data-redirect="https://www.alpinetrek.co.uk{{record.Deeplink}}" data-redirect-target="_blank">
      <div class="record-img">
        <img data-image="{{variantValues.0.ImageURL}}">
      </div>
      <div class="record-product-info">
        <h3 class="record-product-name">
          {{record.Title}}
        </h3>
        <div class="record-product-brand">{{variantValues.0.Manufacturer}}</div>
        <div class="record-product-price">{{variantValues.0.Price}}</div>
      </div>
    </a>
    <div class="record-product-add-to-cart">
      <button>Add to Cart</button>
    </div>
  </ff-record>
</ff-record-list>
<button class="load-more" id="load-more">Load next</button>

</body>
</html>
